<!DOCTYPE html>
<html>

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="./fontawesome/css/all.min.css">
    <!-- Bootstrap CSS  -->
    <link rel="stylesheet" href="./css/bootstrap.min.css">

    <title>iGo</title>
    <link rel="stylesheet" href="./css/stylesheet.css">

    <script src="js/scripts.js"></script>

    <script src="json/attractions.js"></script>
    <script src="json/museums.js"></script>
    <script src="json/pharmacies.js"></script>
    <script src="json/restaurants.js"></script>
    <script src="json/stores.js"></script>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/simple-keyboard@latest/build/css/index.css">
</head>

<body onload="getTime();changeBattery();">
    <img id="watch" src="imagens/watch.png">
    <div id="screen">
        <nav class="navbar navbar-light bg-dark  text-light px-2 m-0 sticky-top">

            <div class="col-4 h6 m-0 p-0 font-weight-bold" id="time"></div>
            <button class="navbar-toggler border-0 col-4 p-0 m-0" type="button" data-toggle="collapse"
                data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
                aria-label="Toggle navigation">
                <!-- Toggle change icon -->
                <i id="menuswitch" class="fas fa-angle-down text-white" onclick="switchAngle('menuswitch')"></i>
            </button>
            <div class="col-2 h5 m-0 p-0 font-weight-normal">
                <img src="imagens/gps.png" width=60%>
            </div>

            <div class="col-2 h5 m-0 p-0 font-weight-normal">
                <img id="battery" width=70%>
            </div>
            <div class="collapse navbar-collapse py-3 text-center" id="navbarSupportedContent">
                <div class="row">
                    <div class="col-6 mb-3 mt-3">
                        <a class="nav-link text-light" href="maps.html">
                            <img src="imagens/maps.png" width=100% class="mr-2">Mapas</a>
                    </div>
                    <div class="col-6 mb-3 mt-3">
                        <a class="nav-link text-light" href="#">
                            <img src="imagens/social.png" width=100% class="mr-2">MyWeb</a>
                    </div>
                </div>
                <div class="row">
                    <div class="col-12">
                        <a class="nav-link text-light" href="#">
                            <img src="imagens/meteo.png" width=35% class="mr-2">
                            <p>Meteorologia</p>
                        </a>
                    </div>
                </div>
            </div>
        </nav>

        <div class="toast position-absolute" id="toast" role="alert" aria-live="assertive" aria-atomic="true"
            data-delay="100000">
            <div class="toast-header">

                <strong class="mr-auto">Erro pesquisa</strong>

                <button type="button" class="ml-2 mb-1 close" onclick="fixInput()" data-dismiss="toast"
                    aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="toast-body">
                Local n√£o encontrado, tente novamente.
            </div>
        </div>
        <div class="mx-2">
            <div class="mt-2 h5 font-weight-bold">
                <a href="./maps.html"><i class="fas fa-chevron-left"></i></a>
                <span class="ml-0">Pesquise por:</span>
                <div class="dropdown-divider mt-1 p-0"></div>
            </div>

            <div class="input-group input-group-sm mb-3">
                <input type="text" class="form-control input submit" id="search" onkeyup="getValue(event)"
                    aria-describedby="inputGroup-sizing-sm">


            </div>

            <div class="text-center">
                <button id="mic" type="button" class="rounded-circle btn btn-secondary"><i
                        class="fas fa-microphone fa-3x" onmousedown="mouseDownMic()"
                        onmouseup="mouseUpMic()"></i></button>
            </div>


        </div>



    </div>

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script>
        document.getElementById("search").addEventListener("keydown", function (e) {
            var keyCode = e.keyCode || e.which;
            if (keyCode === 13) {
                search(document.getElementById('search').value.toLowerCase());
            }
        }, false)

        $('.toast').toast('hide');

        function fixInput() {
            document.getElementById("search").style = "z-index:10";
        }

        function search(name) {
            document.getElementById("search").style = "z-index:-10";
            var attractions = getAttractionData();
            var museums = getMuseumData();
            var pharmacies = getPharmacyData();
            var restaurants = getRestaurantData();
            var stores = getStoreData();

            var object = null;

            if (getAttractionType() == name) {
                toListofLocals(getAttractionData());
                window.location = "placesSearch.html";
                return;
            }

            if (getMuseumType() == name) {
                toListofLocals(getMuseumData());
                window.location = "placesSearch.html";
                return;
            }

            if (getPharmacyType() == name) {
                toListofLocals(getPharmacyData());
                window.location = "placesSearch.html";
                return;
            }

            if (getRestaurantType() == name) {
                toListofLocals(getRestaurantData());
                window.location = "placesSearch.html";
                return;
            }

            if (getStoreType() == name) {
                toListofLocals(getStoreData());
                window.location = "placesSearch.html";
                return;
            }


            object = getAttraction(name);
            if (object != null) {
                localStorage.setItem("pageData2", JSON.stringify(object));
                window.location = "placeSearch.html";
            }

            object = getMuseum(name);
            if (object != null) {
                localStorage.setItem("pageData2", JSON.stringify(object));
                window.location = "placeSearch.html";
            }

            object = getPharmacy(name);
            if (object != null) {
                localStorage.setItem("pageData2", JSON.stringify(object));
                window.location = "placeSearch.html";
            }

            object = getRestaurant(name);
            if (object != null) {
                localStorage.setItem("pageData2", JSON.stringify(object));
                window.location = "placeSearch.html";
            }

            object = getStore(name);
            if (object != null) {
                localStorage.setItem("pageData2", JSON.stringify(object));
                window.location = "placeSearch.html";
            }
            if (object == null) {
                $('.toast').toast('show');
            }

        }
    </script>
    <script src="./js/jquery.slim.min.js"></script>
    <script src="./js/popper.min.js"></script>
    <script src="./js/bootstrap.min.js"></script>


    }</script>

</body>

</html>